FROM ansibleplaybookbundle/apb-base
MAINTAINER Ansible Playbook Bundle Community

RUN yum -y install python-boto3 python-boto && yum clean all

COPY roles /opt/ansible/roles
COPY playbooks /opt/apb/actions

LABEL "com.redhat.apb.spec"=\
"dmVyc2lvbjogMS4wCm5hbWU6IHNucy1hcGIKZGVzY3JpcHRpb246ICdNYW5hZ2VkIHNucyB0b3Bp\
YycKdGFnczoKICAtIGFtYXpvbgogIC0gc25zCmJpbmRhYmxlOiB0cnVlCmFzeW5jOiBvcHRpb25h\
bAptZXRhZGF0YToKICBkaXNwbGF5TmFtZTogIkFtYXpvbiBTTlMgKEFQQikiCiAgbG9uZ0Rlc2Ny\
aXB0aW9uOiAiQW1hem9uIFNpbXBsZSBOb3RpZmljYXRpb24gU2VydmljZSAoQW1hem9uIFNOUykg\
aXMgYSB3ZWIgc2VydmljZSB0aGF0IGVuYWJsZXMgYXBwbGljYXRpb25zLCBlbmQtdXNlcnMsIGFu\
ZCBkZXZpY2VzIHRvIGluc3RhbnRseSBzZW5kIGFuZCByZWNlaXZlIG5vdGlmaWNhdGlvbnMgZnJv\
bSB0aGUgY2xvdWQiCiAgaW1hZ2VVcmw6ICJodHRwczovL3MzLmFtYXpvbmF3cy5jb20vdGhwLWF3\
cy1pY29ucy1kZXYvTWVzc2FnaW5nX0FtYXpvblNOU19MQVJHRS5wbmciCiAgZG9jdW1lbnRhdGlv\
blVybDogImh0dHBzOi8vYXdzLmFtYXpvbi5jb20vZG9jdW1lbnRhdGlvbi9zbnMvIgpwbGFuczoK\
ICAtIG5hbWU6IHRvcGljd2l0aHN1YgogICAgZGVzY3JpcHRpb246ICdEZXBsb3lzIGFuIFNOUyBU\
b3BpYyBhbmQgc3Vic2NyaWJlcyBhbiBlbmRwb2ludCB0byBpdCcKICAgIG1ldGFkYXRhOgogICAg\
ICBkaXNwbGF5TmFtZTogIlRvcGljIGFuZCBTdWJzY3JpcHRpb24iCiAgICAgIGxvbmdEZXNjcmlw\
dGlvbjogIiIKICAgICAgY29zdDogJDAuMDAKICAgIGZyZWU6IGZhbHNlCiAgICBwYXJhbWV0ZXJz\
OgogICAgICAtIG5hbWU6IHN0YWNrX2lkZW50aWZpZXIKICAgICAgICByZXF1aXJlZDogdHJ1ZQog\
ICAgICAgIHRpdGxlOiBVbmlxdWUgU3RhY2sgSWRlbnRpZmllcgogICAgICAgIGRlc2NyaXB0aW9u\
OiAnVW5pcXVlIGlkZW50aWZpZXIgdG8gYmUgaW5jbHVkZWQgaW4gdGhlIENsb3VkRm9ybWF0aW9u\
IFN0YWNrIE5hbWUgdG8gcHJldmVudCBuYW1pbmcgY29sbGlzaW9ucy4gTXVzdCBvbmx5IGNvbnRh\
aW4gYWxwaGFudW1lcmljIGNoYXJhY3RlcnMgYW5kIGh5cGhlbnMuIChlLmcuICJzYW1wbGUtc25z\
LXN0YWNrIiwgInByb2R1Y3Rpb24tc25zLTA4LTIwMTciKScKICAgICAgICB0eXBlOiBzdHJpbmcK\
ICAgICAgLSBuYW1lOiBhd3NfYWNjZXNzX2tleQogICAgICAgIHJlcXVpcmVkOiB0cnVlCiAgICAg\
ICAgdGl0bGU6IEFXUyBBY2Nlc3MgS2V5CiAgICAgICAgZGVzY3JpcHRpb246ICdBV1MgQWNjZXNz\
IEtleSB0byBhdXRoZW50aWNhdGUgdG8gQVdTIHdpdGguJwogICAgICAgIHR5cGU6IHN0cmluZwog\
ICAgICAtIG5hbWU6IGF3c19zZWNyZXRfa2V5CiAgICAgICAgcmVxdWlyZWQ6IHRydWUKICAgICAg\
ICB0aXRsZTogQVdTIFNlY3JldCBLZXkKICAgICAgICBkZXNjcmlwdGlvbjogJ0FXUyBTZWNyZXQg\
S2V5IHRvIGF1dGhlbnRpY2F0ZSB0byBBV1Mgd2l0aC4nCiAgICAgICAgdHlwZTogc3RyaW5nCiAg\
ICAgIC0gbmFtZTogcmVnaW9uCiAgICAgICAgcmVxdWlyZWQ6IHRydWUKICAgICAgICB0aXRsZTog\
QVdTIFJlZ2lvbgogICAgICAgIGRlc2NyaXB0aW9uOiAnQVdTIFJlZ2lvbiB0byBjcmVhdGUgU05T\
IHRvcGljIGluLicKICAgICAgICB0eXBlOiBlbnVtCiAgICAgICAgZW51bToKICAgICAgICAgIC0g\
YXAtbm9ydGhlYXN0LTEKICAgICAgICAgIC0gYXAtbm9ydGhlYXN0LTIKICAgICAgICAgIC0gYXAt\
c291dGgtMQogICAgICAgICAgLSBhcC1zb3V0aGVhc3QtMQogICAgICAgICAgLSBhcC1zb3V0aGVh\
c3QtMgogICAgICAgICAgLSBjYS1jZW50cmFsLTEKICAgICAgICAgIC0gZXUtY2VudHJhbC0xCiAg\
ICAgICAgICAtIGV1LXdlc3QtMQogICAgICAgICAgLSBldS13ZXN0LTIKICAgICAgICAgIC0gc2Et\
ZWFzdC0xCiAgICAgICAgICAtIHVzLWVhc3QtMQogICAgICAgICAgLSB1cy1lYXN0LTIKICAgICAg\
ICAgIC0gdXMtd2VzdC0xCiAgICAgICAgICAtIHVzLXdlc3QtMgogICAgICAgIGRlZmF1bHQ6IHVz\
LXdlc3QtMgogICAgICAtIG5hbWU6IFN1YnNjcmlwdGlvbkVuZFBvaW50CiAgICAgICAgcmVxdWly\
ZWQ6IHRydWUKICAgICAgICB0aXRsZTogU3Vic2NyaXB0aW9uIEVuZCBQb2ludAogICAgICAgIGRl\
c2NyaXB0aW9uOiAnVGhlIGVuZHBvaW50IHRoYXQgcmVjZWl2ZXMgbm90aWZpY2F0aW9ucyBmcm9t\
IHRoZSBBbWF6b24gU05TIHRvcGljLiBUaGUgZW5kcG9pbnQgdmFsdWUgZGVwZW5kcyBvbiB0aGUg\
cHJvdG9jb2wgdGhhdCB5b3Ugc3BlY2lmeS4gVGhpcyBjb3VsZCBiZSBhIFVSTCBvciBBUk4nCiAg\
ICAgICAgdHlwZTogc3RyaW5nCiAgICAgIC0gbmFtZTogU3Vic2NyaXB0aW9uUHJvdG9jb2wKICAg\
ICAgICByZXF1aXJlZDogdHJ1ZQogICAgICAgIHRpdGxlOiBTdWJzY3JpcHRpb24gUHJvdG9jb2wK\
ICAgICAgICBkZXNjcmlwdGlvbjogJ1RoZSBzdWJzY3JpcHRpb25zIHByb3RvY29sJwogICAgICAg\
IGVudW06CiAgICAgICAgICAtIGh0dHAKICAgICAgICAgIC0gaHR0cHMKICAgICAgICAgIC0gZW1h\
aWwKICAgICAgICAgIC0gZW1haWwtanNvbgogICAgICAgICAgLSBzbXMKICAgICAgICAgIC0gc3Fz\
CiAgICAgICAgICAtIGFwcGxpY2F0aW9uCiAgICAgICAgICAtIGxhbWJkYQogICAgICAgIHR5cGU6\
IGVudW0KICAgICAgICBkZWZhdWx0OiBzcXMKICAtIG5hbWU6IHRvcGljCiAgICBkZXNjcmlwdGlv\
bjogJ2RlcGxveXMgYW4gU05TIFRvcGljJwogICAgbWV0YWRhdGE6CiAgICAgIGRpc3BsYXlOYW1l\
OiAiVG9waWMgT25seSIKICAgICAgbG9uZ0Rlc2NyaXB0aW9uOiAiIgogICAgICBjb3N0OiAkMC4w\
MAogICAgZnJlZTogZmFsc2UKICAgIHBhcmFtZXRlcnM6CiAgICAgIC0gbmFtZTogc3RhY2tfaWRl\
bnRpZmllcgogICAgICAgIHJlcXVpcmVkOiB0cnVlCiAgICAgICAgdGl0bGU6IFVuaXF1ZSBTdGFj\
ayBJZGVudGlmaWVyCiAgICAgICAgZGVzY3JpcHRpb246ICdVbmlxdWUgaWRlbnRpZmllciB0byBi\
ZSBpbmNsdWRlZCBpbiB0aGUgQ2xvdWRGb3JtYXRpb24gU3RhY2sgTmFtZSB0byBwcmV2ZW50IG5h\
bWluZyBjb2xsaXNpb25zLiBNdXN0IG9ubHkgY29udGFpbiBhbHBoYW51bWVyaWMgY2hhcmFjdGVy\
cyBhbmQgaHlwaGVucy4gKGUuZy4gInNhbXBsZS1zbnMtc3RhY2siLCAicHJvZHVjdGlvbi1zbnMt\
MDgtMjAxNyIpJwogICAgICAgIHR5cGU6IHN0cmluZwogICAgICAtIG5hbWU6IGF3c19hY2Nlc3Nf\
a2V5CiAgICAgICAgcmVxdWlyZWQ6IHRydWUKICAgICAgICB0aXRsZTogQVdTIEFjY2VzcyBLZXkK\
ICAgICAgICBkZXNjcmlwdGlvbjogJ0FXUyBBY2Nlc3MgS2V5IHRvIGF1dGhlbnRpY2F0ZSB0byBB\
V1Mgd2l0aC4nCiAgICAgICAgdHlwZTogc3RyaW5nCiAgICAgIC0gbmFtZTogYXdzX3NlY3JldF9r\
ZXkKICAgICAgICByZXF1aXJlZDogdHJ1ZQogICAgICAgIHRpdGxlOiBBV1MgU2VjcmV0IEtleQog\
ICAgICAgIGRlc2NyaXB0aW9uOiAnQVdTIFNlY3JldCBLZXkgdG8gYXV0aGVudGljYXRlIHRvIEFX\
UyB3aXRoLicKICAgICAgICB0eXBlOiBzdHJpbmcKICAgICAgLSBuYW1lOiByZWdpb24KICAgICAg\
ICByZXF1aXJlZDogdHJ1ZQogICAgICAgIHRpdGxlOiBBV1MgUmVnaW9uCiAgICAgICAgZGVzY3Jp\
cHRpb246ICdBV1MgUmVnaW9uIHRvIGNyZWF0ZSBTTlMgdG9waWMgaW4uJwogICAgICAgIHR5cGU6\
IGVudW0KICAgICAgICBlbnVtOgogICAgICAgICAgLSBhcC1ub3J0aGVhc3QtMQogICAgICAgICAg\
LSBhcC1ub3J0aGVhc3QtMgogICAgICAgICAgLSBhcC1zb3V0aC0xCiAgICAgICAgICAtIGFwLXNv\
dXRoZWFzdC0xCiAgICAgICAgICAtIGFwLXNvdXRoZWFzdC0yCiAgICAgICAgICAtIGNhLWNlbnRy\
YWwtMQogICAgICAgICAgLSBldS1jZW50cmFsLTEKICAgICAgICAgIC0gZXUtd2VzdC0xCiAgICAg\
ICAgICAtIGV1LXdlc3QtMgogICAgICAgICAgLSBzYS1lYXN0LTEKICAgICAgICAgIC0gdXMtZWFz\
dC0xCiAgICAgICAgICAtIHVzLWVhc3QtMgogICAgICAgICAgLSB1cy13ZXN0LTEKICAgICAgICAg\
IC0gdXMtd2VzdC0yCiAgICAgICAgZGVmYXVsdDogdXMtd2VzdC0yCiAgLSBuYW1lOiBzdWJzY3Jp\
cHRpb24KICAgIGRlc2NyaXB0aW9uOiAnQ3JlYXRlcyBhIHN1YnNjcmlwdGlvbiB0byBhbiBleGlz\
dGluZyB0b3BpYycKICAgIG1ldGFkYXRhOgogICAgICBkaXNwbGF5TmFtZTogIlN1YnNjcmlwdGlv\
biBPbmx5IgogICAgICBsb25nRGVzY3JpcHRpb246ICIiCiAgICAgIGNvc3Q6ICQwLjAwCiAgICBm\
cmVlOiBmYWxzZQogICAgcGFyYW1ldGVyczoKICAgICAgLSBuYW1lOiBzdGFja19pZGVudGlmaWVy\
CiAgICAgICAgcmVxdWlyZWQ6IHRydWUKICAgICAgICB0aXRsZTogVW5pcXVlIFN0YWNrIElkZW50\
aWZpZXIKICAgICAgICBkZXNjcmlwdGlvbjogJ1VuaXF1ZSBpZGVudGlmaWVyIHRvIGJlIGluY2x1\
ZGVkIGluIHRoZSBDbG91ZEZvcm1hdGlvbiBTdGFjayBOYW1lIHRvIHByZXZlbnQgbmFtaW5nIGNv\
bGxpc2lvbnMuIE11c3Qgb25seSBjb250YWluIGFscGhhbnVtZXJpYyBjaGFyYWN0ZXJzIGFuZCBo\
eXBoZW5zLiAoZS5nLiAic2FtcGxlLXNucy1zdGFjayIsICJwcm9kdWN0aW9uLXNucy0wOC0yMDE3\
IiknCiAgICAgICAgdHlwZTogc3RyaW5nCiAgICAgIC0gbmFtZTogYXdzX2FjY2Vzc19rZXkKICAg\
ICAgICByZXF1aXJlZDogdHJ1ZQogICAgICAgIHRpdGxlOiBBV1MgQWNjZXNzIEtleQogICAgICAg\
IGRlc2NyaXB0aW9uOiAnQVdTIEFjY2VzcyBLZXkgdG8gYXV0aGVudGljYXRlIHRvIEFXUyB3aXRo\
LicKICAgICAgICB0eXBlOiBzdHJpbmcKICAgICAgLSBuYW1lOiBhd3Nfc2VjcmV0X2tleQogICAg\
ICAgIHJlcXVpcmVkOiB0cnVlCiAgICAgICAgdGl0bGU6IEFXUyBTZWNyZXQgS2V5CiAgICAgICAg\
ZGVzY3JpcHRpb246ICdBV1MgU2VjcmV0IEtleSB0byBhdXRoZW50aWNhdGUgdG8gQVdTIHdpdGgu\
JwogICAgICAgIHR5cGU6IHN0cmluZwogICAgICAtIG5hbWU6IHJlZ2lvbgogICAgICAgIHJlcXVp\
cmVkOiB0cnVlCiAgICAgICAgdGl0bGU6IEFXUyBSZWdpb24KICAgICAgICBkZXNjcmlwdGlvbjog\
J0FXUyBSZWdpb24gdG8gY3JlYXRlIFNOUyB0b3BpYyBpbi4nCiAgICAgICAgdHlwZTogZW51bQog\
ICAgICAgIGVudW06CiAgICAgICAgICAtIGFwLW5vcnRoZWFzdC0xCiAgICAgICAgICAtIGFwLW5v\
cnRoZWFzdC0yCiAgICAgICAgICAtIGFwLXNvdXRoLTEKICAgICAgICAgIC0gYXAtc291dGhlYXN0\
LTEKICAgICAgICAgIC0gYXAtc291dGhlYXN0LTIKICAgICAgICAgIC0gY2EtY2VudHJhbC0xCiAg\
ICAgICAgICAtIGV1LWNlbnRyYWwtMQogICAgICAgICAgLSBldS13ZXN0LTEKICAgICAgICAgIC0g\
ZXUtd2VzdC0yCiAgICAgICAgICAtIHNhLWVhc3QtMQogICAgICAgICAgLSB1cy1lYXN0LTEKICAg\
ICAgICAgIC0gdXMtZWFzdC0yCiAgICAgICAgICAtIHVzLXdlc3QtMQogICAgICAgICAgLSB1cy13\
ZXN0LTIKICAgICAgICBkZWZhdWx0OiB1cy13ZXN0LTIKICAgICAgLSBuYW1lOiBTdWJzY3JpcHRp\
b25FbmRQb2ludAogICAgICAgIHJlcXVpcmVkOiB0cnVlCiAgICAgICAgdGl0bGU6IFN1YnNjcmlw\
dGlvbiBFbmQgUG9pbnQKICAgICAgICBkZXNjcmlwdGlvbjogJ1RoZSBlbmRwb2ludCB0aGF0IHJl\
Y2VpdmVzIG5vdGlmaWNhdGlvbnMgZnJvbSB0aGUgQW1hem9uIFNOUyB0b3BpYy4gVGhlIGVuZHBv\
aW50IHZhbHVlIGRlcGVuZHMgb24gdGhlIHByb3RvY29sIHRoYXQgeW91IHNwZWNpZnkuIFRoaXMg\
Y291bGQgYmUgYSBVUkwgb3IgQVJOJwogICAgICAgIHR5cGU6IHN0cmluZwogICAgICAtIG5hbWU6\
IFN1YnNjcmlwdGlvblByb3RvY29sCiAgICAgICAgcmVxdWlyZWQ6IHRydWUKICAgICAgICB0aXRs\
ZTogU3Vic2NyaXB0aW9uIFByb3RvY29sCiAgICAgICAgZGVzY3JpcHRpb246ICdUaGUgc3Vic2Ny\
aXB0aW9ucyBwcm90b2NvbCcKICAgICAgICBlbnVtOgogICAgICAgICAgLSAiIgogICAgICAgICAg\
LSBodHRwCiAgICAgICAgICAtIGh0dHBzCiAgICAgICAgICAtIGVtYWlsCiAgICAgICAgICAtIGVt\
YWlsLWpzb24KICAgICAgICAgIC0gc21zCiAgICAgICAgICAtIHNxcwogICAgICAgICAgLSBhcHBs\
aWNhdGlvbgogICAgICAgICAgLSBsYW1iZGEKICAgICAgICB0eXBlOiBlbnVtCiAgICAgIC0gbmFt\
ZTogRXhpc3RpbmdUb3BpY0FybgogICAgICAgIHJlcXVpcmVkOiB0cnVlCiAgICAgICAgdGl0bGU6\
IEV4aXN0aW5nIFNOUyBUb3BpYyBBUk4KICAgICAgICBkZXNjcmlwdGlvbjogJ1RoZSBUb3BpYyBB\
Uk4gdG8gc3Vic2NyaWJlIHRvJwogICAgICAgIHR5cGU6IHN0cmluZwogICAgICAgIGRlZmF1bHQ6\
ICIiCg=="
















USER apb
