version: 1.0
name: sns-apb
description: 'Managed sns topic'
tags:
  - amazon
  - sns
bindable: true
async: optional
metadata:
  displayName: "Amazon SNS (APB)"
  imageUrl: "https://s3.amazonaws.com/thp-aws-icons-dev/Messaging_AmazonSNS_LARGE.png"
  longDescription: "Amazon Simple Notification Service (Amazon SNS) is a web service that enables applications, end-users, and devices to instantly send and receive notifications from the cloud"
  documentationUrl: "https://aws.amazon.com/documentation/sns/"
  providerDisplayName: "Amazon Web Services"
plans:
  - name: sns-topicwithsub
    description: 'Deploys an SNS Topic and subscribes an endpoint to it'
    metadata:
      displayName: "Topic and Subscription"
      longDescription: ""
      cost: $0.00
    free: false
    parameters:
      ##########################
      # AWS Account Information
      ##########################
      - name: aws_access_key
        required: true
        title: AWS Access Key
        description: 'AWS Access Key to authenticate to AWS with.'
        type: string
        display_group: AWS Account Information
      - name: aws_secret_key
        required: true
        title: AWS Secret Key
        description: 'AWS Secret Key to authenticate to AWS with.'
        type: string
        display_type: password
        display_group: AWS Account Information
      - name: aws_cloudformation_role_arn
        required: true
        title: AWS Cloudformation role ARN
        description: 'IAM role ARN for use as Cloudformation Stack Role.'
        type: string
        display_group: AWS Account Information
      #######################################
      # Topic and Subscription Plan Settings
      #######################################
      - name: region
        required: true
        title: AWS Region
        description: 'AWS Region to create SNS topic in.'
        type: enum
        enum:
          - ap-northeast-1
          - ap-northeast-2
          - ap-south-1
          - ap-southeast-1
          - ap-southeast-2
          - ca-central-1
          - eu-central-1
          - eu-west-1
          - eu-west-2
          - sa-east-1
          - us-east-1
          - us-east-2
          - us-west-1
          - us-west-2
        default: us-west-2
        display_group: Topic and Subscription Plan Parameters
      - name: SubscriptionEndPoint
        required: true
        title: Subscription End Point
        description: 'The endpoint that receives notifications from the Amazon SNS topic. The endpoint value depends on the protocol that you specify. This could be a URL or ARN'
        type: string
        display_group: Topic and Subscription Plan Parameters
      - name: SubscriptionProtocol
        required: true
        title: Subscription Protocol
        description: 'The subscriptions protocol'
        enum:
          - http
          - https
          - email
          - email-json
          - sms
          - sqs
          - application
          - lambda
        type: enum
        default: sqs
        display_group: Topic and Subscription Plan Parameters
  - name: sns-topic
    description: 'deploys an SNS Topic'
    metadata:
      displayName: "Topic Only"
      longDescription: ""
      cost: $0.00
    free: false
    parameters:
      ##########################
      # AWS Account Information
      ##########################
      - name: aws_access_key
        required: true
        title: AWS Access Key
        description: 'AWS Access Key to authenticate to AWS with.'
        type: string
        display_group: AWS Account Information
      - name: aws_secret_key
        required: true
        title: AWS Secret Key
        description: 'AWS Secret Key to authenticate to AWS with.'
        type: string
        display_type: password
        display_group: AWS Account Information
      - name: aws_cloudformation_role_arn
        required: true
        title: AWS Cloudformation role ARN
        description: 'IAM role ARN for use as Cloudformation Stack Role.'
        type: string
        display_group: AWS Account Information
      ###########################
      # Topic Only Plan Settings
      ###########################
      - name: region
        required: true
        title: AWS Region
        description: 'AWS Region to create SNS topic in.'
        type: enum
        enum:
          - ap-northeast-1
          - ap-northeast-2
          - ap-south-1
          - ap-southeast-1
          - ap-southeast-2
          - ca-central-1
          - eu-central-1
          - eu-west-1
          - eu-west-2
          - sa-east-1
          - us-east-1
          - us-east-2
          - us-west-1
          - us-west-2
        default: us-west-2
        display_group: Topic Only Plan Parameters
  - name: sns-subscription
    description: 'Creates a subscription to an existing topic'
    metadata:
      displayName: "Subscription Only"
      longDescription: ""
      cost: $0.00
    free: false
    parameters:
      ##########################
      # AWS Account Information
      ##########################
      - name: aws_access_key
        required: true
        title: AWS Access Key
        description: 'AWS Access Key to authenticate to AWS with.'
        type: string
        display_group: AWS Account Information
      - name: aws_secret_key
        required: true
        title: AWS Secret Key
        description: 'AWS Secret Key to authenticate to AWS with.'
        type: string
        display_type: password
        display_group: AWS Account Information
      - name: aws_cloudformation_role_arn
        required: true
        title: AWS Cloudformation role ARN
        description: 'IAM role ARN for use as Cloudformation Stack Role.'
        type: string
        display_group: AWS Account Information
      ##################################
      # Subscription Only Plan Settings
      ##################################
      - name: region
        required: true
        title: AWS Region
        description: 'AWS Region to create SNS topic in.'
        type: enum
        enum:
          - ap-northeast-1
          - ap-northeast-2
          - ap-south-1
          - ap-southeast-1
          - ap-southeast-2
          - ca-central-1
          - eu-central-1
          - eu-west-1
          - eu-west-2
          - sa-east-1
          - us-east-1
          - us-east-2
          - us-west-1
          - us-west-2
        default: us-west-2
        display_group: Subscription Only Plan Parameters
      - name: SubscriptionEndPoint
        required: true
        title: Subscription End Point
        description: 'The endpoint that receives notifications from the Amazon SNS topic. The endpoint value depends on the protocol that you specify. This could be a URL or ARN'
        type: string
        display_group: Subscription Only Plan Parameters
      - name: SubscriptionProtocol
        required: true
        title: Subscription Protocol
        description: 'The subscriptions protocol'
        enum:
          - ""
          - http
          - https
          - email
          - email-json
          - sms
          - sqs
          - application
          - lambda
        type: enum
        display_group: Subscription Only Plan Parameters
      - name: ExistingTopicArn
        required: true
        title: Existing SNS Topic ARN
        description: 'The Topic ARN to subscribe to'
        type: string
        default: ""
        display_group: Subscription Only Plan Parameters

