FROM ansibleplaybookbundle/apb-base
MAINTAINER Ansible Playbook Bundle Community

RUN yum -y install python-boto3 python-boto && yum clean all

COPY roles /opt/ansible/roles
COPY playbooks /opt/apb/actions

LABEL "com.redhat.apb.spec"=\
"dmVyc2lvbjogMS4wCm5hbWU6IHNucy1hcGIKZGVzY3JpcHRpb246ICdNYW5hZ2VkIHNucyB0b3Bp\
YycKdGFnczoKICAtIGFtYXpvbgogIC0gc25zCmJpbmRhYmxlOiB0cnVlCmFzeW5jOiBvcHRpb25h\
bAptZXRhZGF0YToKICBkaXNwbGF5TmFtZTogIkFtYXpvbiBTTlMgKEFQQikiCiAgbG9uZ0Rlc2Ny\
aXB0aW9uOiAiQW1hem9uIFNpbXBsZSBOb3RpZmljYXRpb24gU2VydmljZSAoQW1hem9uIFNOUykg\
aXMgYSB3ZWIgc2VydmljZSB0aGF0IGVuYWJsZXMgYXBwbGljYXRpb25zLCBlbmQtdXNlcnMsIGFu\
ZCBkZXZpY2VzIHRvIGluc3RhbnRseSBzZW5kIGFuZCByZWNlaXZlIG5vdGlmaWNhdGlvbnMgZnJv\
bSB0aGUgY2xvdWQiCiAgaW1hZ2VVcmw6ICJodHRwczovL3MzLmFtYXpvbmF3cy5jb20vdGhwLWF3\
cy1pY29ucy1kZXYvTWVzc2FnaW5nX0FtYXpvblNOU19MQVJHRS5wbmciCiAgZG9jdW1lbnRhdGlv\
blVybDogImh0dHBzOi8vYXdzLmFtYXpvbi5jb20vZG9jdW1lbnRhdGlvbi9zbnMvIgpwbGFuczoK\
ICAtIG5hbWU6IHRvcGljd2l0aHN1YgogICAgZGVzY3JpcHRpb246ICdEZXBsb3lzIGFuIFNOUyBU\
b3BpYyBhbmQgc3Vic2NyaWJlcyBhbiBlbmRwb2ludCB0byBpdCcKICAgIG1ldGFkYXRhOgogICAg\
ICBkaXNwbGF5TmFtZTogIlRvcGljIGFuZCBTdWJzY3JpcHRpb24iCiAgICAgIGxvbmdEZXNjcmlw\
dGlvbjogIiIKICAgICAgY29zdDogJDAuMDAKICAgIGZyZWU6IGZhbHNlCiAgICBwYXJhbWV0ZXJz\
OgogICAgICAjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwogICAgICAjIEFXUyBBY2NvdW50IElu\
Zm9ybWF0aW9uCiAgICAgICMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCiAgICAgIC0gbmFtZTog\
YXdzX2FjY2Vzc19rZXkKICAgICAgICByZXF1aXJlZDogdHJ1ZQogICAgICAgIHRpdGxlOiBBV1Mg\
QWNjZXNzIEtleQogICAgICAgIGRlc2NyaXB0aW9uOiAnQVdTIEFjY2VzcyBLZXkgdG8gYXV0aGVu\
dGljYXRlIHRvIEFXUyB3aXRoLicKICAgICAgICB0eXBlOiBzdHJpbmcKICAgICAgICBkaXNwbGF5\
X3R5cGU6IHBhc3N3b3JkCiAgICAgICAgZGlzcGxheV9ncm91cDogQVdTIEFjY291bnQgSW5mb3Jt\
YXRpb24KICAgICAgLSBuYW1lOiBhd3Nfc2VjcmV0X2tleQogICAgICAgIHJlcXVpcmVkOiB0cnVl\
CiAgICAgICAgdGl0bGU6IEFXUyBTZWNyZXQgS2V5CiAgICAgICAgZGVzY3JpcHRpb246ICdBV1Mg\
U2VjcmV0IEtleSB0byBhdXRoZW50aWNhdGUgdG8gQVdTIHdpdGguJwogICAgICAgIHR5cGU6IHN0\
cmluZwogICAgICAgIGRpc3BsYXlfdHlwZTogcGFzc3dvcmQKICAgICAgICBkaXNwbGF5X2dyb3Vw\
OiBBV1MgQWNjb3VudCBJbmZvcm1hdGlvbgogICAgICAjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMj\
IyMjIyMjIyMjIyMjIyMKICAgICAgIyBUb3BpYyBhbmQgU3Vic2NyaXB0aW9uIFBsYW4gU2V0dGlu\
Z3MKICAgICAgIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCiAgICAgIC0g\
bmFtZTogc3RhY2tfaWRlbnRpZmllcgogICAgICAgIHJlcXVpcmVkOiB0cnVlCiAgICAgICAgdGl0\
bGU6IFVuaXF1ZSBTdGFjayBJZGVudGlmaWVyCiAgICAgICAgZGVzY3JpcHRpb246ICdVbmlxdWUg\
aWRlbnRpZmllciB0byBiZSBpbmNsdWRlZCBpbiB0aGUgQ2xvdWRGb3JtYXRpb24gU3RhY2sgTmFt\
ZSB0byBwcmV2ZW50IG5hbWluZyBjb2xsaXNpb25zLiBNdXN0IG9ubHkgY29udGFpbiBhbHBoYW51\
bWVyaWMgY2hhcmFjdGVycyBhbmQgaHlwaGVucy4gKGUuZy4gInNhbXBsZS1zbnMtc3RhY2siLCAi\
cHJvZHVjdGlvbi1zbnMtMDgtMjAxNyIpJwogICAgICAgIHR5cGU6IHN0cmluZwogICAgICAgIGRp\
c3BsYXlfZ3JvdXA6IFRvcGljIGFuZCBTdWJzY3JpcHRpb24gUGxhbiBQYXJhbWV0ZXJzCiAgICAg\
IC0gbmFtZTogcmVnaW9uCiAgICAgICAgcmVxdWlyZWQ6IHRydWUKICAgICAgICB0aXRsZTogQVdT\
IFJlZ2lvbgogICAgICAgIGRlc2NyaXB0aW9uOiAnQVdTIFJlZ2lvbiB0byBjcmVhdGUgU05TIHRv\
cGljIGluLicKICAgICAgICB0eXBlOiBlbnVtCiAgICAgICAgZW51bToKICAgICAgICAgIC0gYXAt\
bm9ydGhlYXN0LTEKICAgICAgICAgIC0gYXAtbm9ydGhlYXN0LTIKICAgICAgICAgIC0gYXAtc291\
dGgtMQogICAgICAgICAgLSBhcC1zb3V0aGVhc3QtMQogICAgICAgICAgLSBhcC1zb3V0aGVhc3Qt\
MgogICAgICAgICAgLSBjYS1jZW50cmFsLTEKICAgICAgICAgIC0gZXUtY2VudHJhbC0xCiAgICAg\
ICAgICAtIGV1LXdlc3QtMQogICAgICAgICAgLSBldS13ZXN0LTIKICAgICAgICAgIC0gc2EtZWFz\
dC0xCiAgICAgICAgICAtIHVzLWVhc3QtMQogICAgICAgICAgLSB1cy1lYXN0LTIKICAgICAgICAg\
IC0gdXMtd2VzdC0xCiAgICAgICAgICAtIHVzLXdlc3QtMgogICAgICAgIGRlZmF1bHQ6IHVzLXdl\
c3QtMgogICAgICAgIGRpc3BsYXlfZ3JvdXA6IFRvcGljIGFuZCBTdWJzY3JpcHRpb24gUGxhbiBQ\
YXJhbWV0ZXJzCiAgICAgIC0gbmFtZTogU3Vic2NyaXB0aW9uRW5kUG9pbnQKICAgICAgICByZXF1\
aXJlZDogdHJ1ZQogICAgICAgIHRpdGxlOiBTdWJzY3JpcHRpb24gRW5kIFBvaW50CiAgICAgICAg\
ZGVzY3JpcHRpb246ICdUaGUgZW5kcG9pbnQgdGhhdCByZWNlaXZlcyBub3RpZmljYXRpb25zIGZy\
b20gdGhlIEFtYXpvbiBTTlMgdG9waWMuIFRoZSBlbmRwb2ludCB2YWx1ZSBkZXBlbmRzIG9uIHRo\
ZSBwcm90b2NvbCB0aGF0IHlvdSBzcGVjaWZ5LiBUaGlzIGNvdWxkIGJlIGEgVVJMIG9yIEFSTicK\
ICAgICAgICB0eXBlOiBzdHJpbmcKICAgICAgICBkaXNwbGF5X2dyb3VwOiBUb3BpYyBhbmQgU3Vi\
c2NyaXB0aW9uIFBsYW4gUGFyYW1ldGVycwogICAgICAtIG5hbWU6IFN1YnNjcmlwdGlvblByb3Rv\
Y29sCiAgICAgICAgcmVxdWlyZWQ6IHRydWUKICAgICAgICB0aXRsZTogU3Vic2NyaXB0aW9uIFBy\
b3RvY29sCiAgICAgICAgZGVzY3JpcHRpb246ICdUaGUgc3Vic2NyaXB0aW9ucyBwcm90b2NvbCcK\
ICAgICAgICBlbnVtOgogICAgICAgICAgLSBodHRwCiAgICAgICAgICAtIGh0dHBzCiAgICAgICAg\
ICAtIGVtYWlsCiAgICAgICAgICAtIGVtYWlsLWpzb24KICAgICAgICAgIC0gc21zCiAgICAgICAg\
ICAtIHNxcwogICAgICAgICAgLSBhcHBsaWNhdGlvbgogICAgICAgICAgLSBsYW1iZGEKICAgICAg\
ICB0eXBlOiBlbnVtCiAgICAgICAgZGVmYXVsdDogc3FzCiAgICAgICAgZGlzcGxheV9ncm91cDog\
VG9waWMgYW5kIFN1YnNjcmlwdGlvbiBQbGFuIFBhcmFtZXRlcnMKICAtIG5hbWU6IHRvcGljCiAg\
ICBkZXNjcmlwdGlvbjogJ2RlcGxveXMgYW4gU05TIFRvcGljJwogICAgbWV0YWRhdGE6CiAgICAg\
IGRpc3BsYXlOYW1lOiAiVG9waWMgT25seSIKICAgICAgbG9uZ0Rlc2NyaXB0aW9uOiAiIgogICAg\
ICBjb3N0OiAkMC4wMAogICAgZnJlZTogZmFsc2UKICAgIHBhcmFtZXRlcnM6CiAgICAgICMjIyMj\
IyMjIyMjIyMjIyMjIyMjIyMjIyMjCiAgICAgICMgQVdTIEFjY291bnQgSW5mb3JtYXRpb24KICAg\
ICAgIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMKICAgICAgLSBuYW1lOiBhd3NfYWNjZXNzX2tl\
eQogICAgICAgIHJlcXVpcmVkOiB0cnVlCiAgICAgICAgdGl0bGU6IEFXUyBBY2Nlc3MgS2V5CiAg\
ICAgICAgZGVzY3JpcHRpb246ICdBV1MgQWNjZXNzIEtleSB0byBhdXRoZW50aWNhdGUgdG8gQVdT\
IHdpdGguJwogICAgICAgIHR5cGU6IHN0cmluZwogICAgICAgIGRpc3BsYXlfdHlwZTogcGFzc3dv\
cmQKICAgICAgICBkaXNwbGF5X2dyb3VwOiBBV1MgQWNjb3VudCBJbmZvcm1hdGlvbgogICAgICAt\
IG5hbWU6IGF3c19zZWNyZXRfa2V5CiAgICAgICAgcmVxdWlyZWQ6IHRydWUKICAgICAgICB0aXRs\
ZTogQVdTIFNlY3JldCBLZXkKICAgICAgICBkZXNjcmlwdGlvbjogJ0FXUyBTZWNyZXQgS2V5IHRv\
IGF1dGhlbnRpY2F0ZSB0byBBV1Mgd2l0aC4nCiAgICAgICAgdHlwZTogc3RyaW5nCiAgICAgICAg\
ZGlzcGxheV90eXBlOiBwYXNzd29yZAogICAgICAgIGRpc3BsYXlfZ3JvdXA6IEFXUyBBY2NvdW50\
IEluZm9ybWF0aW9uCiAgICAgICMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwogICAgICAjIFRv\
cGljIE9ubHkgUGxhbiBTZXR0aW5ncwogICAgICAjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMK\
ICAgICAgLSBuYW1lOiBzdGFja19pZGVudGlmaWVyCiAgICAgICAgcmVxdWlyZWQ6IHRydWUKICAg\
ICAgICB0aXRsZTogVW5pcXVlIFN0YWNrIElkZW50aWZpZXIKICAgICAgICBkZXNjcmlwdGlvbjog\
J1VuaXF1ZSBpZGVudGlmaWVyIHRvIGJlIGluY2x1ZGVkIGluIHRoZSBDbG91ZEZvcm1hdGlvbiBT\
dGFjayBOYW1lIHRvIHByZXZlbnQgbmFtaW5nIGNvbGxpc2lvbnMuIE11c3Qgb25seSBjb250YWlu\
IGFscGhhbnVtZXJpYyBjaGFyYWN0ZXJzIGFuZCBoeXBoZW5zLiAoZS5nLiAic2FtcGxlLXNucy1z\
dGFjayIsICJwcm9kdWN0aW9uLXNucy0wOC0yMDE3IiknCiAgICAgICAgdHlwZTogc3RyaW5nCiAg\
ICAgICAgZGlzcGxheV9ncm91cDogVG9waWMgT25seSBQbGFuIFBhcmFtZXRlcnMKICAgICAgLSBu\
YW1lOiByZWdpb24KICAgICAgICByZXF1aXJlZDogdHJ1ZQogICAgICAgIHRpdGxlOiBBV1MgUmVn\
aW9uCiAgICAgICAgZGVzY3JpcHRpb246ICdBV1MgUmVnaW9uIHRvIGNyZWF0ZSBTTlMgdG9waWMg\
aW4uJwogICAgICAgIHR5cGU6IGVudW0KICAgICAgICBlbnVtOgogICAgICAgICAgLSBhcC1ub3J0\
aGVhc3QtMQogICAgICAgICAgLSBhcC1ub3J0aGVhc3QtMgogICAgICAgICAgLSBhcC1zb3V0aC0x\
CiAgICAgICAgICAtIGFwLXNvdXRoZWFzdC0xCiAgICAgICAgICAtIGFwLXNvdXRoZWFzdC0yCiAg\
ICAgICAgICAtIGNhLWNlbnRyYWwtMQogICAgICAgICAgLSBldS1jZW50cmFsLTEKICAgICAgICAg\
IC0gZXUtd2VzdC0xCiAgICAgICAgICAtIGV1LXdlc3QtMgogICAgICAgICAgLSBzYS1lYXN0LTEK\
ICAgICAgICAgIC0gdXMtZWFzdC0xCiAgICAgICAgICAtIHVzLWVhc3QtMgogICAgICAgICAgLSB1\
cy13ZXN0LTEKICAgICAgICAgIC0gdXMtd2VzdC0yCiAgICAgICAgZGVmYXVsdDogdXMtd2VzdC0y\
CiAgICAgICAgZGlzcGxheV9ncm91cDogVG9waWMgT25seSBQbGFuIFBhcmFtZXRlcnMKICAtIG5h\
bWU6IHN1YnNjcmlwdGlvbgogICAgZGVzY3JpcHRpb246ICdDcmVhdGVzIGEgc3Vic2NyaXB0aW9u\
IHRvIGFuIGV4aXN0aW5nIHRvcGljJwogICAgbWV0YWRhdGE6CiAgICAgIGRpc3BsYXlOYW1lOiAi\
U3Vic2NyaXB0aW9uIE9ubHkiCiAgICAgIGxvbmdEZXNjcmlwdGlvbjogIiIKICAgICAgY29zdDog\
JDAuMDAKICAgIGZyZWU6IGZhbHNlCiAgICBwYXJhbWV0ZXJzOgogICAgICAjIyMjIyMjIyMjIyMj\
IyMjIyMjIyMjIyMjIwogICAgICAjIEFXUyBBY2NvdW50IEluZm9ybWF0aW9uCiAgICAgICMjIyMj\
IyMjIyMjIyMjIyMjIyMjIyMjIyMjCiAgICAgIC0gbmFtZTogYXdzX2FjY2Vzc19rZXkKICAgICAg\
ICByZXF1aXJlZDogdHJ1ZQogICAgICAgIHRpdGxlOiBBV1MgQWNjZXNzIEtleQogICAgICAgIGRl\
c2NyaXB0aW9uOiAnQVdTIEFjY2VzcyBLZXkgdG8gYXV0aGVudGljYXRlIHRvIEFXUyB3aXRoLicK\
ICAgICAgICB0eXBlOiBzdHJpbmcKICAgICAgICBkaXNwbGF5X3R5cGU6IHBhc3N3b3JkCiAgICAg\
ICAgZGlzcGxheV9ncm91cDogQVdTIEFjY291bnQgSW5mb3JtYXRpb24KICAgICAgLSBuYW1lOiBh\
d3Nfc2VjcmV0X2tleQogICAgICAgIHJlcXVpcmVkOiB0cnVlCiAgICAgICAgdGl0bGU6IEFXUyBT\
ZWNyZXQgS2V5CiAgICAgICAgZGVzY3JpcHRpb246ICdBV1MgU2VjcmV0IEtleSB0byBhdXRoZW50\
aWNhdGUgdG8gQVdTIHdpdGguJwogICAgICAgIHR5cGU6IHN0cmluZwogICAgICAgIGRpc3BsYXlf\
dHlwZTogcGFzc3dvcmQKICAgICAgICBkaXNwbGF5X2dyb3VwOiBBV1MgQWNjb3VudCBJbmZvcm1h\
dGlvbgogICAgICAjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCiAgICAgICMgU3Vi\
c2NyaXB0aW9uIE9ubHkgUGxhbiBTZXR0aW5ncwogICAgICAjIyMjIyMjIyMjIyMjIyMjIyMjIyMj\
IyMjIyMjIyMjIyMjCiAgICAgIC0gbmFtZTogc3RhY2tfaWRlbnRpZmllcgogICAgICAgIHJlcXVp\
cmVkOiB0cnVlCiAgICAgICAgdGl0bGU6IFVuaXF1ZSBTdGFjayBJZGVudGlmaWVyCiAgICAgICAg\
ZGVzY3JpcHRpb246ICdVbmlxdWUgaWRlbnRpZmllciB0byBiZSBpbmNsdWRlZCBpbiB0aGUgQ2xv\
dWRGb3JtYXRpb24gU3RhY2sgTmFtZSB0byBwcmV2ZW50IG5hbWluZyBjb2xsaXNpb25zLiBNdXN0\
IG9ubHkgY29udGFpbiBhbHBoYW51bWVyaWMgY2hhcmFjdGVycyBhbmQgaHlwaGVucy4gKGUuZy4g\
InNhbXBsZS1zbnMtc3RhY2siLCAicHJvZHVjdGlvbi1zbnMtMDgtMjAxNyIpJwogICAgICAgIHR5\
cGU6IHN0cmluZwogICAgICAgIGRpc3BsYXlfZ3JvdXA6IFN1YnNjcmlwdGlvbiBPbmx5IFBsYW4g\
UGFyYW1ldGVycwogICAgICAtIG5hbWU6IHJlZ2lvbgogICAgICAgIHJlcXVpcmVkOiB0cnVlCiAg\
ICAgICAgdGl0bGU6IEFXUyBSZWdpb24KICAgICAgICBkZXNjcmlwdGlvbjogJ0FXUyBSZWdpb24g\
dG8gY3JlYXRlIFNOUyB0b3BpYyBpbi4nCiAgICAgICAgdHlwZTogZW51bQogICAgICAgIGVudW06\
CiAgICAgICAgICAtIGFwLW5vcnRoZWFzdC0xCiAgICAgICAgICAtIGFwLW5vcnRoZWFzdC0yCiAg\
ICAgICAgICAtIGFwLXNvdXRoLTEKICAgICAgICAgIC0gYXAtc291dGhlYXN0LTEKICAgICAgICAg\
IC0gYXAtc291dGhlYXN0LTIKICAgICAgICAgIC0gY2EtY2VudHJhbC0xCiAgICAgICAgICAtIGV1\
LWNlbnRyYWwtMQogICAgICAgICAgLSBldS13ZXN0LTEKICAgICAgICAgIC0gZXUtd2VzdC0yCiAg\
ICAgICAgICAtIHNhLWVhc3QtMQogICAgICAgICAgLSB1cy1lYXN0LTEKICAgICAgICAgIC0gdXMt\
ZWFzdC0yCiAgICAgICAgICAtIHVzLXdlc3QtMQogICAgICAgICAgLSB1cy13ZXN0LTIKICAgICAg\
ICBkZWZhdWx0OiB1cy13ZXN0LTIKICAgICAgICBkaXNwbGF5X2dyb3VwOiBTdWJzY3JpcHRpb24g\
T25seSBQbGFuIFBhcmFtZXRlcnMKICAgICAgLSBuYW1lOiBTdWJzY3JpcHRpb25FbmRQb2ludAog\
ICAgICAgIHJlcXVpcmVkOiB0cnVlCiAgICAgICAgdGl0bGU6IFN1YnNjcmlwdGlvbiBFbmQgUG9p\
bnQKICAgICAgICBkZXNjcmlwdGlvbjogJ1RoZSBlbmRwb2ludCB0aGF0IHJlY2VpdmVzIG5vdGlm\
aWNhdGlvbnMgZnJvbSB0aGUgQW1hem9uIFNOUyB0b3BpYy4gVGhlIGVuZHBvaW50IHZhbHVlIGRl\
cGVuZHMgb24gdGhlIHByb3RvY29sIHRoYXQgeW91IHNwZWNpZnkuIFRoaXMgY291bGQgYmUgYSBV\
Ukwgb3IgQVJOJwogICAgICAgIHR5cGU6IHN0cmluZwogICAgICAgIGRpc3BsYXlfZ3JvdXA6IFN1\
YnNjcmlwdGlvbiBPbmx5IFBsYW4gUGFyYW1ldGVycwogICAgICAtIG5hbWU6IFN1YnNjcmlwdGlv\
blByb3RvY29sCiAgICAgICAgcmVxdWlyZWQ6IHRydWUKICAgICAgICB0aXRsZTogU3Vic2NyaXB0\
aW9uIFByb3RvY29sCiAgICAgICAgZGVzY3JpcHRpb246ICdUaGUgc3Vic2NyaXB0aW9ucyBwcm90\
b2NvbCcKICAgICAgICBlbnVtOgogICAgICAgICAgLSAiIgogICAgICAgICAgLSBodHRwCiAgICAg\
ICAgICAtIGh0dHBzCiAgICAgICAgICAtIGVtYWlsCiAgICAgICAgICAtIGVtYWlsLWpzb24KICAg\
ICAgICAgIC0gc21zCiAgICAgICAgICAtIHNxcwogICAgICAgICAgLSBhcHBsaWNhdGlvbgogICAg\
ICAgICAgLSBsYW1iZGEKICAgICAgICB0eXBlOiBlbnVtCiAgICAgICAgZGlzcGxheV9ncm91cDog\
U3Vic2NyaXB0aW9uIE9ubHkgUGxhbiBQYXJhbWV0ZXJzCiAgICAgIC0gbmFtZTogRXhpc3RpbmdU\
b3BpY0FybgogICAgICAgIHJlcXVpcmVkOiB0cnVlCiAgICAgICAgdGl0bGU6IEV4aXN0aW5nIFNO\
UyBUb3BpYyBBUk4KICAgICAgICBkZXNjcmlwdGlvbjogJ1RoZSBUb3BpYyBBUk4gdG8gc3Vic2Ny\
aWJlIHRvJwogICAgICAgIHR5cGU6IHN0cmluZwogICAgICAgIGRlZmF1bHQ6ICIiCiAgICAgICAg\
ZGlzcGxheV9ncm91cDogU3Vic2NyaXB0aW9uIE9ubHkgUGxhbiBQYXJhbWV0ZXJzCg=="
















USER apb
